name: Deploy to bahricourse
on:
  push:
    branches:
      - master
  pull_request:
    branches:
      - master

jobs:
  build:
    name: Build and deploy the website
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - uses: shivammathur/setup-php@v2
      with:
        php-version: '7.3'
        tools: composer
    - run: composer install
    - uses: actions/setup-node@v1
      with:
        node-version: '12'
    - run: npm install yarn
    - run: yarn install
    - run: yarn build
    
    - name: Deploy website with FTP
        uses: SamKirkland/FTP-Deploy-Action@4.3.3
        with:
          ftp-server: ${{ secrets.SERVER }}
          ftp-username: ${{ secrets.USERNAME }}
          ftp-password: ${{ secrets.PASSWORD }}



#   push:
#     branches:
#       - master
# jobs:
#   FTP-Deploy-Action:
#     name: FTP-Deploy-Action
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@v2.1.0
#         with:
#           fetch-depth: 2
#       - name: FTP-Deploy-Action
#         uses: SamKirkland/FTP-Deploy-Action@4.3.3
#         with:
#           ftp-server: ${{ secrets.SERVER }}
#           ftp-username: ${{ secrets.USERNAME }}
#           ftp-password: ${{ secrets.PASSWORD }}